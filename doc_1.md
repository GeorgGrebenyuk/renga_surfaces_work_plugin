# Преобразование LandXML-поверхности в IFC-файл для импорта в Renga с учетом преобразования координат
## Краткое описание логики работы
1. Пользователь нажимает на кнопку "Convert LandXml to IFC" на инструментальной ленте плагина и последовательно открываются 2 диалоговых окна - с выбором Landxml файла и текстового файла с параметрами сдвига;
2. В случае, если выбранные файлы существуют, запускается внутренняя процедура последовательных действий:
- чтение параметров трансформации файла (линейный сдвиг и поворот);
- чтение файла LandXML с поверхностями и фиксация геометрии поверхностей и их имён во временные структуры данных;
- запись в IFC файл полученных поверхностей как элементов IfcBuildingElementProxy с геометрической структурой IfcProductDefinitionShape, именем поверхности в свойстве и статичным цветом RGB(102,51,0).
3. Пользователь открывает сформированный IFC-файл как новый проект Renga (файл IFC формируется с названием LandXML файла, в одном файловом каталоге с ним);
4. Пользователь копирует геометрию поверхности и вставляет в целевой проект с привязкой к "Нулю Renga" (с зажатой клавишей Left Shift). 

## Отдельные моменты и рекомендации по исходным данным
- в силу временной невозможности считать параметры сдвига из свойств Здания в Параметрах проекта, они будут заноситься через текстовый файл (с расширением txt) в виде построчного списка - dX, dY, dZ, угол (в **градусах**);
- в файле LandXML реклмендуется "держать" одну поверхность. Если их будет несколько - в итоговом IFC файле также будет несколько поверхностей, но их визуально будет сложно различать;
- в силу используемых для описания классов IFC, нельзя передать точные границы поверхностей, особенно внутренние;
- файл с параметрами сдвига нужен обязательно, так как проектные координаты поверхностей как правило, большого порядка, и загрузка файла в режиме "без преобразования" может привести к фатальному завершению работы программы. Если координаты имеют малый порядок, то допустимо в качестве параметров текстового файла "сдвига" взять такую структуру:
```
0.0
0.0
0.0
0.0
```
В противном случае текстовой файл должен иметь следующий вид:
```
IfcLocationX
IfcLocationY
IfcLocationZ
IfcDirectionPrecession
```
Где *IfcLocationX*, *IfcLocationt*, *IfcLocationZ* казываются в мм, а *IfcDirectionPrecession* в градусах.
**Примечание**: разделитель дробной части следует указывать "точку", а не запятую -- будьте внимательными при заполнении!
